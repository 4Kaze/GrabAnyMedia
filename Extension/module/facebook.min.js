!function(){"use strict";var t=function(t,e,n){return t?(chrome.runtime.sendMessage({exe:"newTab",url:e}),!1):void chrome.runtime.sendMessage({exe:"download",srcvideo:e,title:n})},e=function(t){return t?t.indexOf("#grabanymedia")>-1?t.replace(/\#grabanymedia/gi,""):t.indexOf("?")>-1?t.replace("?","?grabanymedia="+Date.now()+"&"):t.indexOf("#")>-1?t.replace("#","?grabanymedia="+Date.now()+"#"):t+"?grabanymedia="+Date.now():t},n=function(){try{return new XMLHttpRequest}catch(t){}try{return new ActiveXObject("Msxml3.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}return null},r=function(t,r){"function"!=typeof r&&(r=function(){});var o=n();return t=e(t),t&&o?(o.responseType="document",o.overrideMimeType("text/html"),o.open("GET",t,!0),o.onload=function(){o.readyState===o.DONE&&r(o)},void o.send(null)):(r(),!1)},o=function(t){if(t=t||"",0!=t.indexOf("http"))return"";t=t.replace(new RegExp("^(https://|http://)","gi"),"");var e=t.split("/")||[],n=e.length>=1?e[0].split("."):[];return n.length>=2?n[n.length-2].toLowerCase():""},i=function(t,e){return e=e||function(){},t?void r(t,function(t){if(!t||!t.responseXML)return e();var n,r=t.responseXML.querySelectorAll("script"),o=t.responseXML.title||"Facebook";o=o.trim().replace(/[^\w]/gi,"_");for(var i=0;i<r.length;i++){var a=r[i].textContent||"";if(a=a.trim(),a.match('"{0,1}videoData"{0,1}:')&&a.match('"{0,1}sd_src"{0,1}:')){n=a;break}}if(!n||n.length<1)return e();try{var c=/(\"{0,1}videoData\"{0,1}\:\[\{)(.*?)(\}\])/gi,l=/(\"{0,1}hd_src\"{0,1}\:\")(.*?)(\")/gi,u=/(\"{0,1}sd_src\"{0,1}\:\")(.*?)(\")/gi,s=c.exec(n);if(!s||4!=s.length)return e();var p=s[2].trim();if(!p||p.length<1)return e();var m=[],f=l.exec(p),d=u.exec(p);f&&4==f.length&&m.push({url:f[2].trim(),quality:"HD",type:"",title:o}),d&&4==d.length&&m.push({url:d[2].trim(),quality:"SD",type:"",title:o}),e(m)}catch(g){e()}}):e()};window.GAMMODULE={getLinks:function(e,n,r,a){return r&&0==r.indexOf("http")?(t(a,r),!1):(e=e||document.location.href,n=n||function(){},"facebook"!=o(e)?[]:e.match(/^(https\:\/\/|http\:\/\/|\/\/).*facebook\..*\/.*\/videos\/:?/gi)?void i(e,function(t){return!t||t.length<1?n():n(t)}):(alert(chrome.i18n.getMessage("fb_to_video")),n()))}}}();
//# sourceMappingURL=facebook.min.js.map