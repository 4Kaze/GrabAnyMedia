!function(){"use strict";var e=function(e,t,r){return e?(chrome.runtime.sendMessage({exe:"newTab",url:t}),!1):void chrome.runtime.sendMessage({exe:"download",srcvideo:t,title:r})},t=function(e){return e?e.indexOf("#grabanymedia")>-1?e.replace(/\#grabanymedia/gi,""):e.indexOf("?")>-1?e.replace("?","?grabanymedia="+Date.now()+"&"):e.indexOf("#")>-1?e.replace("#","?grabanymedia="+Date.now()+"#"):e+"?grabanymedia="+Date.now():e},r=function(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml3.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}return null},n=function(e,n){"function"!=typeof n&&(n=function(){});var i=r();return e=t(e),e&&i?(i.responseType="document",i.overrideMimeType("text/html"),i.open("GET",e,!0),i.onload=function(){i.readyState===i.DONE&&n(i)},void i.send(null)):(n(),!1)},i=function(e){if(e=e||"",0!=e.indexOf("http"))return"";e=e.replace(new RegExp("^(https://|http://)","gi"),"");var t=e.split("/")||[],r=t.length>=1?t[0].split("."):[];return r.length>=2?r[r.length-2].toLowerCase():""},c=function(e,t){return t=t||function(){},e?void n(e,function(e){if(!e||!e.responseXML)return t();var r,n=e.responseXML.querySelectorAll("script"),i=e.responseXML.title||"Facebook";i=i.trim().replace(/[^\w]/gi,"_");for(var c=0;c<n.length;c++){var o=n[c].textContent||"";if(o=o.trim(),o.match('"{0,1}videoData"{0,1}:')&&o.match('"{0,1}sd_src"{0,1}:')){r=o;break}}if(!r||r.length<1)return t();try{var a=/(\"{0,1}videoData\"{0,1}\:\[\{)(.*?)(\}\])/gi,u=/(\"{0,1}hd_src\"{0,1}\:\")(.*?)(\")/gi,l=/(\"{0,1}sd_src\"{0,1}\:\")(.*?)(\")/gi,s=a.exec(r);if(!s||4!=s.length)return t();var d=s[2].trim();if(!d||d.length<1)return t();var f=[],h=u.exec(d),v=l.exec(d);h&&4==h.length&&f.push({url:h[2].trim(),quality:"HD",type:"",title:i}),v&&4==v.length&&f.push({url:v[2].trim(),quality:"SD",type:"",title:i}),t(f)}catch(p){t()}}):t()};window.GAMMODULE={getLinks:function(t,r,n,o){if(n&&0==n.indexOf("http"))return e(o,n),!1;if(t=t||document.location.href,r=r||function(){},"facebook"!=i(t))return[];var a=document.querySelector("video[src='"+n+"']");if(a){var u=a.closest("[id^='hyperfeed_story_id']");if(u){var l=u.querySelectorAll("a"),s="";l.forEach(function(e){if(s)return!1;var t=e.href;/(?:\/videos\/\d+\/)|(?:\/video\.php\?v=\d+)/i.test(t)&&(s=t)}),s&&(t=s)}}return t.match(/^(https\:\/\/|http\:\/\/|\/\/).*facebook\..*\/.*\/videos\/:?/gi)?void c(t,function(e){return!e||e.length<1?r():r(e)}):(alert(chrome.i18n.getMessage("fb_to_video")),r())}}}();
//# sourceMappingURL=facebook.min.js.map